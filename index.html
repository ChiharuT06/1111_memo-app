<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>The Little Prince</title>
<script src="js/jquery-2.1.3.min.js"></script>
<script src="js/test.js"></script>
<link rel="stylesheet" href="css/sample.css">
</head>
<body>
    <header>

        <h1> It is only with the heart that one can see rightly. 
    
            <br>What is essential is invisible to the eye.</h1>
    </header>

<div class="column-all">

    <div class="column-left">
        <main>
            <!-- ↓1行のテキスト入力欄を作る -->
            <input type="text" id="key">
            
            <!-- 複数行のテキスト入力欄を作る -->
            <textarea id="memo"></textarea>
            <ul>
                <li id="save">Save</li>
                <li id="clear">Clear</li>
            </ul>
        </main>
            <table id="list">
            <!-- ここに追加データが挿入される -->
            </table>    
    </div>
        <!-- ここから2カラム[右] -->
        <div class="column-right">   
             <table id="list2"></table>       
        </div>

<!-- <td>の文字列を取得する -->

<!-- 取得した文字列を画像に変換する -->



</div>

<footer><small></small></footer>

<!-- ここにscriptタグを移動 -->
<script>
        
    //1.Save クリックイベント
    
    //saveのボタンが押されたら実行したい
    $("#save").on('click',function(){
        //jQueryでinputのhtmlの記述された文字を取得する
        //val();
        //$("#xx").val();inputタグにしか使えない
        //input text email textarea tel
        let key = $("#key").val();
        let memo = $("#memo").val();
        console.log(key,"データ取れてるかチェック")
        console.log(memo,"データ取れてるかチェック")
        
        
        
        //データを保存する⇒localStrageを使います
        localStorage.setItem(key,memo)
        const html =`
        <tr>
            <th>${key}</th>
            <td>${memo}</td>
        </tr>
        `;
    
        $("#list").append(html);
        console.log(html);
        $("#list2").append(html);
        console.log(html);


        
        
    });
    
    
    
    //2.clear クリックイベント
    
    $("#clear").on("click",function(){
        localStorage.clear();  //これだけだとlocalstrageしか消えない
        $("#list").empty();     //htmlも抹消する
    });
    
    
    
    //3.ページ読み込み：保存データ取得表示
    //既に登録されているlocalStrageがあれば
    //その数だけぐるぐる回ってデータを取ってくる
    //つまりリロードしても画面に残る
    
    for(let i = 0; i < localStorage.length;i++){
        const key = localStorage.key(i);
        const value = localStorage.getItem(key);
        const html =`
    <tr>
        <th>${key}</th>
        <td>${value}</td>
    </tr>
    `
    //getItemで取って来たものを画面上に埋め込み
    $("#list").append(html);
    console.log(html);
    $("#list2").append(html);
    console.log(html);
    }
    

</script>
</body>
</html>